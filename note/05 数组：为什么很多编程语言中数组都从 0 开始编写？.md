# 05 数组：为什么很多编程语言中数组都从 0 开始编写？

## 什么是数组？
> 数组是一种线性表数据结构。它使用一段连续的内存空间，来存储一组具有相同数据类型的数据
1. 线性表结构
2. 连续内存空间和相同数据类型

### 什么是线性表
> 数据排列成向一条线一样的结构，线性表中的数据只有前后两个方向。例如：链表、队列、栈。
> 与之对立的是非线性表，例如二叉树，堆，图等。非线性表中的数据并不是简单的前后关系

### 按下标随机访问
> 正式因为**连续内存和存储相同数据类型**这一限制，才能够给数组提供 “随机访问” 特性。但同时也因为这个特性，导致数组的删除或插入变的低效，因为为了保证内存的连续，需要做很多数据搬迁的工作

一位数组寻址公式：```a[i]_address = base_address + i * data_type_size```
二维数组 m*n 寻址公式：```a[i][j]_address = base_address + (i*n+j) * dada_type_size ```

**注意**：数组按下标访问时，时间复杂度才为 **O(1)**

### 低效的“插入”和“删除”

**插入操作**：
最好时间复杂度（插入数组尾部）：O(1)
最坏时间复杂度（插入数组头部）：O(n)
平均时间复杂度（1+2+3...n)/n：O(n)

>tips: 如果对数组存储数据的顺序没有要求，在插入第 K 个位置时，可以将第 K 个位置上的元素移动到数组尾部，在将要插入的数据直接存入第 K 个位置

**删除操作**：
最好时间复杂度（删除尾部元素）：O(1)
最坏时间复杂度（删除头部元素）：O(n)
平均时间复杂度（1+2+3...n)/n：O(n)

>tips: 如果对于数组的连续性没有要求，我们可以采用标记的方式，在数组空间不够用的时候用在对标记的数据进行统一删除，以此来减少数据搬迁操作，Android 中的 **SparseArray** 就采用了标记删除的方式。

##容器与数组
在业务开发的大部分情况下，直接选择使用容器类就可以了
### ArrayList
以 Java 中的 **ArrayList** 为例，它的好处有：
1. 对数组的操作进行封装。例如在插入或者删除数据的时，对数据的搬移操作。
2. 动态扩容

### 什么时候使用数组
1. 使用基本类型：int，long...，特别关注性能话，可以使用数组。
2. 数据大小已知，操作十分简单。

## 数组下标为什么从 0 开始
数组下标从 0 开始的寻址公式：``` 
a[k]_address = base_address + k * type_size```
数组下标从 1 开始的寻址公式：``` 
a[k]_address = base_address + (k-1)*type_size```

>数组下标从 1 开始的话，会比下标从 0 开始多了一次减法运算，对于 CPU 来说，多了一条减法指令。从效率角度来说，选择下标从 0 开始效率更高

或者说是历史原因：
> 早期的 C 语言，数组下标是从 0 开始的，之后的 Java，JS 等语言都效仿了这一操作，为了在一定程度上减少 C 语言程序员学习 Java、JS 的学习成本。

